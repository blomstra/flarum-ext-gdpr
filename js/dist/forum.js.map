{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@flarum/gdpr/./src/common/components/RequestDataExportModal.tsx","webpack://@flarum/gdpr/./src/common/extend.ts","webpack://@flarum/gdpr/./src/common/models/ErasureRequest.ts","webpack://@flarum/gdpr/./src/common/models/Export.ts","webpack://@flarum/gdpr/./src/forum/addAnonymousBadges.tsx","webpack://@flarum/gdpr/./src/forum/components/DeleteUserModal.tsx","webpack://@flarum/gdpr/./src/forum/components/ErasureRequestsDropdown.tsx","webpack://@flarum/gdpr/./src/forum/components/ErasureRequestsList.js","webpack://@flarum/gdpr/./src/forum/components/ErasureRequestsPage.js","webpack://@flarum/gdpr/./src/forum/components/ExportAvailableNotification.ts","webpack://@flarum/gdpr/./src/forum/components/ProcessErasureRequestModal.tsx","webpack://@flarum/gdpr/./src/forum/components/RequestErasureModal.js","webpack://@flarum/gdpr/./src/forum/extend.ts","webpack://@flarum/gdpr/./src/forum/extenders/extendHeaderSecondary.tsx","webpack://@flarum/gdpr/./src/forum/extenders/extendPage.ts","webpack://@flarum/gdpr/./src/forum/extenders/extendUserControls.tsx","webpack://@flarum/gdpr/./src/forum/extenders/extendUserSettingsPage.tsx","webpack://@flarum/gdpr/./src/forum/index.ts","webpack://@flarum/gdpr/./src/forum/states/ErasureRequestsListState.ts","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/Component']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/Model']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/app']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/components/Button']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/components/Page']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/extend']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/extenders']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/models/User']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['forum/app']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['forum/components/HeaderSecondary']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['forum/components/NotificationsDropdown']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['forum/components/UserCard']\"","webpack://@flarum/gdpr/external root \"flarum.core.compat['forum/utils/UserControls']\"","webpack://@flarum/gdpr/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/gdpr/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@flarum/gdpr/webpack/bootstrap","webpack://@flarum/gdpr/webpack/runtime/compat get default export","webpack://@flarum/gdpr/webpack/runtime/define property getters","webpack://@flarum/gdpr/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/gdpr/webpack/runtime/make namespace object","webpack://@flarum/gdpr/./forum.ts"],"sourcesContent":["import app from 'flarum/common/app';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport username from 'flarum/common/helpers/username';\nimport User from 'flarum/common/models/User';\nimport type Mithril from 'mithril';\nimport avatar from 'flarum/common/helpers/avatar';\n\ninterface RequestDataExportModalAttrs extends IInternalModalAttrs {\n  user: User;\n}\n\nexport default class RequestDataExportModal extends Modal<RequestDataExportModalAttrs> {\n  user!: User;\n\n  oninit(vnode: Mithril.Vnode<RequestDataExportModalAttrs>) {\n    super.oninit(vnode);\n\n    this.user = this.attrs.user;\n  }\n\n  className() {\n    return 'RequestDataModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('blomstra-gdpr.lib.request_data.title', {\n      username: username(this.user),\n    });\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"User\">{avatar(this.user)}</div>\n          <p className=\"helpText\">{app.translator.trans('blomstra-gdpr.lib.request_data.text')}</p>\n          <div className=\"Form-group\">\n            <Button\n              className=\"Button Button--primary Button--block\"\n              onclick={() => this.requestExport()}\n              loading={this.loading}\n              disabled={this.loading}\n            >\n              {app.translator.trans('blomstra-gdpr.lib.request_data.request_button')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  requestExport() {\n    this.loading = true;\n\n    app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/gdpr/export',\n        body: {\n          data: {\n            attributes: {\n              userId: this.user.id(),\n            },\n          },\n        },\n      })\n      .then(this.hide.bind(this), this.loaded.bind(this));\n  }\n}\n","import Extend from 'flarum/common/extenders';\nimport User from 'flarum/common/models/User';\nimport ErasureRequest from './models/ErasureRequest';\nimport Export from './models/Export';\n\nexport default [\n  new Extend.Store() //\n    .add('user-erasure-requests', ErasureRequest)\n    .add('exports', Export),\n\n  new Extend.Model(User) //\n    .attribute<boolean>('canModerateExports')\n    .attribute<boolean>('anonymized')\n    .hasOne<ErasureRequest>('erasureRequest'),\n];\n","import Model from 'flarum/common/Model';\nimport User from 'flarum/common/models/User';\n\nexport default class ErasureRequest extends Model {\n  status() {\n    return Model.attribute<string>('status').call(this);\n  }\n\n  reason() {\n    return Model.attribute<string>('reason').call(this);\n  }\n\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n\n  userConfirmedAt() {\n    return Model.attribute('userConfirmedAt', Model.transformDate).call(this);\n  }\n\n  processedAt() {\n    return Model.attribute('processedAt', Model.transformDate).call(this);\n  }\n\n  processorComment() {\n    return Model.attribute<string>('processorComment').call(this);\n  }\n\n  processedMode() {\n    return Model.attribute<string>('processedMode').call(this);\n  }\n\n  user() {\n    return Model.hasOne<User>('user').call(this);\n  }\n\n  processedBy() {\n    return Model.hasOne<User>('processedBy').call(this);\n  }\n}\n","import Model from 'flarum/common/Model';\nimport User from 'flarum/common/models/User';\n\nexport default class Export extends Model {\n  file() {\n    return Model.attribute<string>('file').call(this);\n  }\n\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate);\n  }\n\n  destroysAt() {\n    return Model.attribute('destroysAt', Model.transformDate);\n  }\n\n  user() {\n    return Model.hasOne<User>('user');\n  }\n\n  actor() {\n    return Model.hasOne<User>('actor');\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport User from 'flarum/common/models/User';\nimport Badge from 'flarum/common/components/Badge';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\n\nexport default function () {\n  extend(User.prototype, 'badges', function (badges: ItemList<Mithril.Children>) {\n    if (this.anonymized()) {\n      badges.add(\n        'anonymized',\n        <Badge label={app.translator.trans('blomstra-gdpr.forum.badges.anonymized_user')} icon=\"fas fa-user-secret\" type=\"anonymized\" />\n      );\n    }\n  });\n}\n","import app from 'flarum/forum/app';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport User from 'flarum/common/models/User';\nimport type Mithril from 'mithril';\nimport username from 'flarum/common/helpers/username';\nimport Button from 'flarum/common/components/Button';\n\ninterface DeleteUserModalAttrs extends IInternalModalAttrs {\n  user: User;\n}\n\nexport default class DeleteUserModal extends Modal<DeleteUserModalAttrs> {\n  user!: User;\n  loadingAnonymization: boolean = false;\n  loadingDeletion: boolean = false;\n\n  oninit(vnode: Mithril.Vnode<DeleteUserModalAttrs>) {\n    super.oninit(vnode);\n\n    this.user = this.attrs.user;\n  }\n\n  className() {\n    return 'DeleteUserModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('blomstra-gdpr.forum.delete_user.title', {\n      username: username(this.user),\n    });\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <p className=\"helpText\">\n            {app.translator.trans('blomstra-gdpr.forum.delete_user.text', {\n              username: username(this.user),\n            })}\n          </p>\n          <div className=\"Form-group\">\n            <Button\n              className=\"Button Button--primary Button--block\"\n              onclick={() => this.defaultErasure()}\n              loading={this.loading}\n              disabled={this.loading}\n            >\n              {app.translator.trans('blomstra-gdpr.forum.delete_user.modal_delete_button')}\n            </Button>\n          </div>\n          {app.forum.attribute('erasureAnonymizationAllowed') && app.forum.attribute('erasureDeletionAllowed') && (\n            <div>\n              <div className=\"Form-group\">\n                <Button\n                  className=\"Button Button--block\"\n                  onclick={() => this.specificErasure('anonymization')}\n                  loading={this.loadingAnonymization}\n                  disabled={this.loadingAnonymization}\n                >\n                  {app.translator.trans('blomstra-gdpr.forum.process_erasure.anonymization_button')}\n                </Button>\n              </div>\n              <div className=\"Form-group\">\n                <Button\n                  className=\"Button Button--danger Button--block\"\n                  onclick={() => this.specificErasure('deletion')}\n                  loading={this.loadingDeletion}\n                  disabled={this.loadingDeletion}\n                >\n                  {app.translator.trans('blomstra-gdpr.forum.process_erasure.deletion_button')}\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  defaultErasure() {\n    this.loading = true;\n\n    this.user.delete().then(\n      () => {\n        this.hide();\n        this.loading = false;\n        m.redraw();\n      },\n      () => {}\n    );\n  }\n\n  specificErasure(mode: string) {\n    if (mode === 'anonymization') {\n      this.loadingAnonymization = true;\n    } else {\n      this.loadingDeletion = true;\n    }\n\n    app\n      .request({\n        method: 'DELETE',\n        url: app.forum.attribute('apiUrl') + '/users/' + this.user.id() + '/gdpr/' + mode,\n      })\n      .then(\n        () => {\n          this.hide();\n          this.loadingAnonymization = false;\n          this.loadingDeletion = false;\n          m.redraw();\n        },\n        () => []\n      );\n  }\n}\n","import app from 'flarum/forum/app';\nimport NotificationsDropdown from 'flarum/forum/components/NotificationsDropdown';\n\nimport ErasureRequestsList from './ErasureRequestsList';\nimport { IDropdownAttrs } from 'flarum/common/components/Dropdown';\nimport ErasureRequestsListState from '../states/ErasureRequestsListState';\n\ninterface ErasureRequestsDropdownAttrs extends IDropdownAttrs {\n  state: ErasureRequestsListState;\n}\n\nexport default class ErasureRequestsDropdown extends NotificationsDropdown<ErasureRequestsDropdownAttrs> {\n  static initAttrs(attrs: ErasureRequestsDropdownAttrs) {\n    attrs.label = attrs.label || app.translator.trans('blomstra-gdpr.forum.erasure_requests.tooltip');\n    attrs.icon = attrs.icon || 'fas fa-user-minus';\n\n    super.initAttrs(attrs);\n  }\n\n  getMenu() {\n    return (\n      <div className={'Dropdown-menu ' + this.attrs.menuClassName} onclick={this.menuClick.bind(this)}>\n        {this.showing ? ErasureRequestsList.component({ state: this.attrs.state }) : ''}\n      </div>\n    );\n  }\n\n  goToRoute() {\n    m.route.set(app.route('erasure-requests'));\n  }\n\n  getUnreadCount(): number | undefined {\n    if (!this.attrs.state.requestsLoaded) {\n      return app.forum.attribute('erasureRequestCount');\n    }\n\n    return app.store.all('erasure-requests').length;\n  }\n\n  getNewCount() {\n    return this.getUnreadCount();\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport avatar from 'flarum/common/helpers/avatar';\nimport icon from 'flarum/common/helpers/icon';\nimport username from 'flarum/common/helpers/username';\nimport humanTime from 'flarum/common/helpers/humanTime';\n\nimport ProcessErasureRequestModal from './ProcessErasureRequestModal';\n\nexport default class ErasureRequestsList extends Component {\n  view() {\n    const erasureRequests = app.store.all('user-erasure-requests');\n    const state = this.attrs.state;\n\n    return (\n      <div className=\"NotificationList ErasureRequestsList\">\n        <div className=\"NotificationList-header\">\n          <h4 className=\"App-titleControl App-titleControl--text\">{app.translator.trans('blomstra-gdpr.forum.erasure_requests.title')}</h4>\n        </div>\n        <div className=\"NotificationList-content\">\n          <ul className=\"NotificationGroup-content\">\n            {erasureRequests.length ? (\n              erasureRequests.map((request) => {\n                return (\n                  <li>\n                    <a onclick={this.showModal.bind(this, request)} className=\"Notification Request\">\n                      {avatar(request.user())}\n                      {icon('fas fa-user-edit', { className: 'Notification-icon' })}\n                      <span className=\"Notification-content\">\n                        {app.translator.trans(`blomstra-gdpr.forum.erasure_requests.item_text`, {\n                          name: username(request.user()),\n                        })}\n                      </span>\n                      {humanTime(request.createdAt())}\n                    </a>\n                  </li>\n                );\n              })\n            ) : !state.loading ? (\n              <div className=\"NotificationList-empty\">{app.translator.trans('blomstra-gdpr.forum.erasure_requests.empty_text')}</div>\n            ) : (\n              LoadingIndicator.component({ className: 'LoadingIndicator--block' })\n            )}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  showModal(request) {\n    app.modal.show(ProcessErasureRequestModal, { request });\n  }\n}\n","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\n\nimport ErasureRequestsList from './ErasureRequestsList';\n\nexport default class ErasureRequestsPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.history.push('erasure-requests');\n\n    app.erasureRequests.load();\n\n    this.bodyClass = 'App--ErasureRequests';\n  }\n\n  view() {\n    return (\n      <div className=\"ErasureRequestsPage\">\n        <ErasureRequestsList state={app.erasureRequests}></ErasureRequestsList>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\nimport Export from '../../common/models/Export';\nimport username from 'flarum/common/helpers/username';\n\nexport default class ExportAvailableNotification extends Notification {\n  icon() {\n    return 'fas fa-file-export';\n  }\n\n  href() {\n    const exportModel = this.attrs.notification.subject() as Export;\n\n    // Building the full url scheme so that Mithril treats this as an external link, so the download will work correctly.\n    return app.forum.attribute<string>('baseUrl') + `/gdpr/export/${exportModel.file()}`;\n  }\n\n  content() {\n    const notification = this.attrs.notification;\n    return app.translator.trans('blomstra-gdpr.forum.notification.export-ready', {\n      username: username(notification.fromUser()),\n    });\n  }\n\n  excerpt() {\n    return null;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport username from 'flarum/common/helpers/username';\nimport extractText from 'flarum/common/utils/extractText';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Stream from 'flarum/common/utils/Stream';\nimport type Mithril from 'mithril';\nimport ErasureRequest from 'src/common/models/ErasureRequest';\nimport UserCard from 'flarum/forum/components/UserCard';\n\ninterface ProcessErasureRequestModalAttrs extends IInternalModalAttrs {\n  request: ErasureRequest;\n}\n\nexport default class ProcessErasureRequestModal extends Modal<ProcessErasureRequestModalAttrs> {\n  comments: Stream<string>;\n  loadingAnonymization: boolean = false;\n  loadingDeletion: boolean = false;\n  request!: ErasureRequest;\n\n  oninit(vnode: Mithril.Vnode<ProcessErasureRequestModalAttrs>) {\n    super.oninit(vnode);\n\n    this.request = this.attrs.request;\n\n    this.comments = Stream('');\n  }\n\n  className() {\n    return 'ProcessErasureRequestModal Modal--medium';\n  }\n\n  title() {\n    return app.translator.trans('blomstra-gdpr.forum.process_erasure.title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">{this.fields().toArray()}</div>\n      </div>\n    );\n  }\n\n  fields() {\n    const items = new ItemList<Mithril.Children>();\n\n    const erasureRequest = this.attrs.request;\n\n    items.add(\n      'text',\n      <div>\n        <UserCard className=\"UserCard--popover UserCard--gdpr\" user={this.request.user()} />\n        <p className=\"helpText\">{app.translator.trans('blomstra-gdpr.forum.process_erasure.text', { name: username(this.request.user()) })}</p>\n      </div>\n    );\n\n    erasureRequest?.reason() &&\n      items.add(\n        'reason',\n        <p className=\"helpText\">\n          <code>{erasureRequest.reason()}</code>\n        </p>\n      );\n\n    items.add(\n      'comments',\n      <div className=\"Form-group\">\n        <textarea\n          className=\"FormControl\"\n          value={this.comments()}\n          bidi={this.comments}\n          placeholder={extractText(app.translator.trans('blomstra-gdpr.forum.process_erasure.comments_label'))}\n        ></textarea>\n      </div>\n    );\n\n    if (app.forum.attribute('erasureAnonymizationAllowed')) {\n      items.add(\n        'anonymize',\n        <div className=\"Form-group\">\n          {Button.component(\n            {\n              className: 'Button Button--primary Button--block',\n              loading: this.loadingAnonymization,\n              onclick: () => this.process('anonymization'),\n            },\n            app.translator.trans('blomstra-gdpr.forum.process_erasure.anonymization_button')\n          )}\n        </div>\n      );\n    }\n\n    if (app.forum.attribute('erasureDeletionAllowed')) {\n      items.add(\n        'delete',\n        <div className=\"Form-group\">\n          {Button.component(\n            {\n              className: 'Button Button--danger Button--block',\n              loading: this.loadingDeletion,\n              onclick: () => this.process('deletion'),\n            },\n            app.translator.trans('blomstra-gdpr.forum.process_erasure.deletion_button')\n          )}\n        </div>\n      );\n    }\n\n    return items;\n  }\n\n  process(mode: string) {\n    if (\n      !confirm(\n        app.translator.trans('blomstra-gdpr.forum.process_erasure.confirm', {\n          name: extractText(username(this.request.user())),\n          mode,\n        }) as string\n      )\n    ) {\n      return;\n    }\n\n    if (mode === 'anonymization') {\n      this.loadingAnonymization = true;\n    } else {\n      this.loadingDeletion = true;\n    }\n\n    m.redraw();\n\n    this.request\n      .save({ processor_comment: this.comments(), meta: { mode } })\n      .then((erasureRequest) => {\n        app.store.remove(erasureRequest);\n        this.loadingAnonymization = false;\n        this.loadingDeletion = false;\n        m.redraw();\n        this.hide();\n      })\n      .catch(() => {\n        this.loadingAnonymization = false;\n        this.loadingDeletion = false;\n        m.redraw();\n      });\n  }\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport extractText from 'flarum/common/utils/extractText';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Stream from 'flarum/common/utils/Stream';\n\nexport default class RequestErasureModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.reason = Stream('');\n    this.password = Stream('');\n  }\n\n  className() {\n    return 'RequestErasureModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('blomstra-gdpr.forum.request_erasure.title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">{this.fields().toArray()}</div>\n      </div>\n    );\n  }\n\n  fields() {\n    const items = new ItemList();\n\n    const currRequest = app.session.user.erasureRequest();\n\n    if (currRequest) {\n      items.add(\n        'status',\n        <div className=\"Form-group\">\n          <p className=\"helpText\">{app.translator.trans(`blomstra-gdpr.forum.request_erasure.status.${currRequest.status()}`)}</p>\n        </div>\n      );\n\n      if (currRequest.reason()) {\n        items.add(\n          'reason',\n          <div className=\"Form-group\">\n            <p className=\"helpText\">{app.translator.trans('blomstra-gdpr.forum.request_erasure.reason', { reason: currRequest.reason() })}</p>\n          </div>\n        );\n      }\n\n      items.add(\n        'cancel',\n        <div className=\"Form-group\">\n          {Button.component(\n            {\n              className: 'Button Button--primary Button--block',\n              onclick: this.oncancel.bind(this),\n              loading: this.loading,\n            },\n            app.translator.trans('blomstra-gdpr.forum.request_erasure.cancel_button')\n          )}\n        </div>\n      );\n    } else {\n      items.add('text', <p className=\"helpText\">{app.translator.trans('blomstra-gdpr.forum.request_erasure.text')}</p>);\n\n      if (!app.forum.attribute('passwordlessSignUp')) {\n        items.add(\n          'password',\n          <div className=\"Form-group\">\n            <input\n              type=\"password\"\n              className=\"FormControl\"\n              bidi={this.password}\n              placeholder={extractText(app.translator.trans('blomstra-gdpr.forum.request_erasure.password_label'))}\n            />\n          </div>\n        );\n      }\n\n      items.add(\n        'reason',\n        <div className=\"Form-group\">\n          <textarea\n            className=\"FormControl\"\n            value={this.reason()}\n            oninput={(e) => this.reason(e.target.value)}\n            placeholder={extractText(app.translator.trans('blomstra-gdpr.forum.request_erasure.reason_label'))}\n          ></textarea>\n        </div>\n      );\n\n      items.add(\n        'submit',\n        <div className=\"Form-group\">\n          {Button.component(\n            {\n              className: 'Button Button--primary Button--block',\n              type: 'submit',\n              loading: this.loading,\n            },\n            app.translator.trans('blomstra-gdpr.forum.request_erasure.request_button')\n          )}\n        </div>\n      );\n    }\n\n    return items;\n  }\n\n  oncancel(e) {\n    this.loading = true;\n    m.redraw();\n\n    app.session.user\n      .erasureRequest()\n      .delete()\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  data() {\n    // Status is set so that the proper confirmation message is displayed.\n    return {\n      reason: this.reason(),\n      status: 'user_confirmed',\n      relationships: { user: app.session.user },\n    };\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    app.store\n      .createRecord('user-erasure-requests')\n      .save(this.data(), { meta: { password: this.password() } })\n      .then((erasureRequest) => {\n        app.session.user.pushData({ relationships: { erasureRequest } });\n        this.loading = false;\n        m.redraw();\n      })\n      .catch(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n}\n","import Extend from 'flarum/common/extenders';\nimport ErasureRequestsPage from './components/ErasureRequestsPage';\n\nimport { default as extend } from '../common/extend';\n\nexport default [\n  ...extend,\n\n  new Extend.Routes() //\n    .add('erasure-requests', '/erasure-requests', ErasureRequestsPage),\n];\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport ErasureRequestsDropdown from '../components/ErasureRequestsDropdown';\n\nexport default function extendHeaderSecondary() {\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    if (app.forum.attribute<number | null>('erasureRequestCount')) {\n      items.add('erasureRequests', <ErasureRequestsDropdown state={app.erasureRequests} />, 20);\n    }\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport Page from 'flarum/common/components/Page';\n\nexport default function extendPage() {\n  extend(Page.prototype, 'oninit', function () {\n    if (m.route.param('erasureRequestConfirmed')) {\n      app.alerts.show({ type: 'success' }, app.translator.trans('blomstra-gdpr.forum.erasure_request_confirmed'));\n    }\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport UserControls from 'flarum/forum/utils/UserControls';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport User from 'flarum/common/models/User';\nimport Button from 'flarum/common/components/Button';\nimport RequestDataExportModal from '../../common/components/RequestDataExportModal';\nimport type Mithril from 'mithril';\nimport DeleteUserModal from '../components/DeleteUserModal';\n\nexport default function extendUserControls() {\n  extend(UserControls, 'moderationControls', function (items: ItemList<Mithril.Children>, user: User) {\n    if (user.canModerateExports()) {\n      items.add(\n        'gdpr-export',\n        <Button icon=\"fas fa-file-export\" onclick={() => app.modal.show(RequestDataExportModal, { user })}>\n          {app.translator.trans('blomstra-gdpr.forum.settings.export_data_button')}\n        </Button>\n      );\n    }\n  });\n\n  extend(UserControls, 'destructiveControls', function (items: ItemList<Mithril.Children>, user: User) {\n    items.remove('delete');\n\n    if (user.canDelete()) {\n      items.add(\n        'gdpr-erase',\n        <Button icon=\"fas fa-eraser\" onclick={() => app.modal.show(DeleteUserModal, { user })}>\n          {app.translator.trans('blomstra-gdpr.forum.delete_user.delete_button')}\n        </Button>\n      );\n    }\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport SettingsPage from 'flarum/forum/components/SettingsPage';\nimport FieldSet from 'flarum/common/components/FieldSet';\nimport type Mithril from 'mithril';\nimport Button from 'flarum/common/components/Button';\nimport RequestErasureModal from '../components/RequestErasureModal';\nimport RequestDataExportModal from '../../common/components/RequestDataExportModal';\n\nexport default function extendUserSettingsPage() {\n  extend(SettingsPage.prototype, 'settingsItems', function (items: ItemList<Mithril.Children>) {\n    const user = this.user;\n\n    if (!user) {\n      return;\n    }\n\n    items.add(\n      'dataItems',\n      <FieldSet className=\"Settings-gdpr\" label={app.translator.trans('blomstra-gdpr.forum.settings.data.heading')}>\n        {this.dataItems().toArray()}\n      </FieldSet>,\n      -100\n    );\n  });\n\n  SettingsPage.prototype.dataItems = function (): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'gdprErasure',\n      <div className=\"gdprErasure-container\">\n        <Button className=\"Button Button-gdprErasure\" icon=\"fas fa-user-minus\" onclick={() => app.modal.show(RequestErasureModal)}>\n          {app.translator.trans('blomstra-gdpr.forum.settings.request_erasure_button')}\n        </Button>\n        <p className=\"helpText\">{app.translator.trans('blomstra-gdpr.forum.settings.request_erasure_help')}</p>\n      </div>,\n      50\n    );\n\n    items.add(\n      'gdprExport',\n      <div className=\"gdprExport-container\">\n        <Button\n          className=\"Button Button-gdprExport\"\n          icon=\"fas fa-file-export\"\n          onclick={() => app.modal.show(RequestDataExportModal, { user: this.user })}\n        >\n          {app.translator.trans('blomstra-gdpr.forum.settings.export_data_button')}\n        </Button>\n        <p className=\"helpText\">{app.translator.trans('blomstra-gdpr.forum.settings.export_data_help')}</p>\n      </div>,\n      40\n    );\n\n    return items;\n  };\n}\n","import app from 'flarum/forum/app';\nimport ErasureRequestsListState from './states/ErasureRequestsListState';\nimport ExportAvailableNotification from './components/ExportAvailableNotification';\nimport extendUserSettingsPage from './extenders/extendUserSettingsPage';\nimport extendHeaderSecondary from './extenders/extendHeaderSecondary';\nimport extendPage from './extenders/extendPage';\nimport extendUserControls from './extenders/extendUserControls';\nimport addAnonymousBadges from './addAnonymousBadges';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('blomstra-gdpr', () => {\n  app.erasureRequests = new ErasureRequestsListState();\n\n  app.notificationComponents.gdprExportAvailable = ExportAvailableNotification;\n\n  extendUserSettingsPage();\n  extendHeaderSecondary();\n  extendPage();\n  extendUserControls();\n  addAnonymousBadges();\n});\n","import app from 'flarum/forum/app';\n\nexport default class ErasureRequestsListState {\n  loading: boolean = false;\n  requestsLoaded: boolean = false;\n\n  load() {\n    if (this.requestsLoaded) {\n      return;\n    }\n\n    this.loading = true;\n    m.redraw();\n\n    app.store\n      .find('user-erasure-requests')\n      .then(\n        () => (this.requestsLoaded = true),\n        () => {}\n      )\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n}\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/app'];","module.exports = flarum.core.compat['common/components/Badge'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/FieldSet'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/extenders'];","module.exports = flarum.core.compat['common/helpers/avatar'];","module.exports = flarum.core.compat['common/helpers/humanTime'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/helpers/username'];","module.exports = flarum.core.compat['common/models/User'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/utils/extractText'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/HeaderSecondary'];","module.exports = flarum.core.compat['forum/components/Notification'];","module.exports = flarum.core.compat['forum/components/NotificationsDropdown'];","module.exports = flarum.core.compat['forum/components/SettingsPage'];","module.exports = flarum.core.compat['forum/components/UserCard'];","module.exports = flarum.core.compat['forum/utils/UserControls'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/forum';\n"],"names":["app","Modal","Button","username","avatar","RequestDataExportModal","_Modal","_this","_len","arguments","length","args","Array","_key","call","apply","concat","user","_inheritsLoose","_proto","prototype","oninit","vnode","attrs","className","title","translator","trans","content","_this2","m","onclick","requestExport","loading","disabled","request","method","url","forum","attribute","body","data","attributes","userId","id","then","hide","bind","loaded","default","Extend","User","ErasureRequest","Export","Store","add","Model","hasOne","_Model","status","reason","createdAt","transformDate","userConfirmedAt","processedAt","processorComment","processedMode","processedBy","file","destroysAt","actor","extend","Badge","badges","anonymized","label","icon","type","DeleteUserModal","loadingAnonymization","loadingDeletion","defaultErasure","specificErasure","_this3","redraw","mode","_this4","NotificationsDropdown","ErasureRequestsList","ErasureRequestsDropdown","_NotificationsDropdow","initAttrs","getMenu","menuClassName","menuClick","showing","component","state","goToRoute","route","set","getUnreadCount","requestsLoaded","store","all","getNewCount","Component","LoadingIndicator","humanTime","ProcessErasureRequestModal","_Component","view","erasureRequests","map","showModal","name","modal","show","Page","ErasureRequestsPage","_Page","history","push","load","bodyClass","Notification","ExportAvailableNotification","_Notification","href","exportModel","notification","subject","fromUser","excerpt","extractText","ItemList","Stream","UserCard","comments","fields","toArray","items","erasureRequest","value","bidi","placeholder","process","confirm","save","processor_comment","meta","remove","RequestErasureModal","password","currRequest","session","oncancel","oninput","e","target","relationships","onsubmit","preventDefault","createRecord","pushData","Routes","HeaderSecondary","extendHeaderSecondary","extendPage","param","alerts","UserControls","extendUserControls","canModerateExports","canDelete","SettingsPage","FieldSet","extendUserSettingsPage","dataItems","ErasureRequestsListState","addAnonymousBadges","initializers","notificationComponents","gdprExportAvailable","find","setPrototypeOf","t","o","Object","create","constructor","_setPrototypeOf","__proto__"],"sourceRoot":""}